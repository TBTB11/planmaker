# アプリケーション構造と技術選定の概要

本ドキュメントは、本アプリケーション（PlanMaker）の技術的な構造、採用しているアーキテクチャ、および開発思想についてまとめたものです。

## 1. アプリケーションの全体構造

本アプリは **「Local-First SPA (Single Page Application)」** と呼ばれる構成を採用しています。

*   **SPA (Single Page Application)**:
    *   Webブラウザ上で単一のWebページを読み込み、Javascriptによって動的にコンテンツを書き換えるアプリケーション形式です。
    *   ページ遷移ごとのサーバー通信が発生しないため、ネイティブアプリのような高速な操作性を実現します。
*   **Local-First**:
    *   データの保存・処理をサーバー（クラウド）ではなく、ユーザーの端末（ブラウザ）を主として行う設計思想です。
    *   インターネット接続に依存せず、常に利用可能な状態を保ちます。

## 2. 主要技術スタック

| カテゴリ | 技術名 | 選定理由 |
| :--- | :--- | :--- |
| **UIライブラリ** | **React** | 宣言的なUI構築、豊富なエコシステム、高いパフォーマンス。 |
| **開発言語** | **TypeScript** | 静的型付けによる開発効率と保守性の向上、バグの未然防止。 |
| **ビルドツール** | **Vite** | 高速な開発サーバー起動とビルド処理。モダンな開発体験。 |
| **スタイリング** | **Tailwind CSS** | ユーティリティクラスによる迅速なスタイリング、CSS設計コストの削減。 |
| **データベース** | **Dexie.js** | ブラウザ標準のDB (IndexedDB) を扱いやすくするラッパー。ローカルデータ永続化の中核。 |

## 3. Local-First SPAのメリット・デメリット

本アーキテクチャは、個人または小規模チームでの開発・運用、およびプライバシー重視のアプリに最適化されています。

### メリット
1.  **運用コストの最小化**:
    動的なバックエンドサーバー（DBサーバー等）が不要なため、静的ホスティングサービス（Vercel, GitHub Pages等）を利用でき、サーバー維持費をほぼゼロに抑えられます。
2.  **オフライン対応とパフォーマンス**:
    ネットワーク通信を必要としないため、ネット環境が不安定な場所でも動作し、操作に対するレスポンスが非常に高速です。
3.  **セキュリティとプライバシー**:
    データが外部サーバーに送信されず、ユーザーの端末内にのみ存在するため、サーバー側からの情報漏洩リスクが構造的に排除されます。

### デメリット
1.  **端末間同期の欠如**:
    クラウドサーバーを介さないため、PCとタブレットなど複数端末で自動的にデータを同期することができません（データのエクスポート/インポートが必要）。
2.  **データ消失リスク**:
    端末の故障やブラウザのキャッシュクリアによりデータが失われる可能性があります（ユーザーによる定期的なバックアップが必要）。
3.  **共有機能の制限**:
    複数ユーザーでのリアルタイム編集やデータ共有機能の実装には、別途サーバーサイドの構築が必要となります。

## 4. 開発プロセス：MVP (Minimum Viable Product)

本プロジェクトでは **MVP（実用最小限の製品）** での開発アプローチを採用しています。

*   **定義**: 顧客に価値を提供できる最小限の機能を備えたプロダクト。
*   **目的**: 開発期間とコストを抑え、早期にリリースしてフィードバックを得ることで、無駄な機能開発を防ぎ、製品の方向性を修正しながら完成度を高めます。
*   **本アプリでの適用**:
    *   まずは「単一端末・ローカル保存」で動作する学習計画機能を最優先で実装。
    *   クラウド同期や多機能な分析ツールなどの「あったら良い機能」は、MVPリリース後のフェーズで検討します。

## 5. 設計思想：コンポーネント指向

本アプリのUI設計は **コンポーネント指向** に基づいています。

### 概要
画面全体を「ページ」として捉えるのではなく、ボタン、入力フォーム、カードなどの「再利用可能な部品（コンポーネント）」の組み合わせとして構築する手法です。

### 従来の「ページ指向 (MPA)」との比較
*   **ページ指向 (MPA)**: ページ遷移ごとにHTMLをサーバーから再取得する。SEOに有利だが、操作感やサーバー負荷に課題がある。
*   **コンポーネント指向 (SPA)**: 最初にアプリ全体を読み込み、内部でコンポーネントを切り替える。リッチな操作体験と高い開発効率を実現する。

### 主なメリット
1.  **再利用性**: 作成したコンポーネントをアプリ内の複数の場所で使い回すことができ、開発工数を削減できます。
2.  **保守性**: UIの変更が必要な場合、該当するコンポーネントのみを修正すれば、使用されている全箇所に反映されます。
3.  **並行開発**: 機能やパーツごとに独立性が高いため、複数人での分担開発が容易になります。

※ 従来の **MVC (Model-View-Controller)** アーキテクチャと比較すると、React等のモダンなフレームワークでは、View（見た目）とLogic（ロジック）をコンポーネント内にカプセル化する傾向が強く、厳密にはMVCとは異なるアプローチ（Flux/Reduxアーキテクチャ等）や、より柔軟な責務分離が採用されます。

## 6. ReactとTypeScriptの関係性

ReactとTypeScriptは、現代のWeb開発において「基盤技術（UI構築）」と「開発言語（安全性）」という補完関係にあります。

### React (UIライブラリ)
*   **役割**: ユーザーインターフェース（画面）を構築するための「道具箱」。
*   **なぜ必要なのか**:
    *   生（Vanilla）のJavaScriptだけで現代的なUI（一部分だけの更新、複雑な状態管理）を実装するのは、コードが肥大化しバグの温床となるため。
    *   Reactは「データの変更に応じて、画面のどこを更新すべきか」を自動計算し、高速かつ正確に描画を行います。
*   **動作環境**: アプリケーションの一部としてビルド（梱包）され、ユーザーのブラウザ上で実行されます。

### TypeScript (プログラミング言語)
*   **役割**: 安全な開発を行うための「ルールブック付き言語」。
*   **なぜ必要なのか**:
    *   JavaScriptには「変数の型（数値、文字列などの区別）」がないため、予期せぬエラーが実行時に発生しやすい問題があります。
    *   TypeScriptは開発中に「ここに入れるデータが間違っている」と警告を出し、バグを未然に防ぎます。
*   **関係性まとめ**: **React**で作る「画面の部品」に対して、その設計図の正しさを**TypeScript**が保証する、という協力関係です。

## 7. ビルドプロセスの仕組み

本アプリは、開発者が書いたコードをそのままブラウザに送るのではなく、**「ビルド」**という工程を経て提供されます。

1.  **開発環境**:
    それぞれのファイル（`App.tsx`, `Layout.tsx`など）は独立して存在し、開発者が編集します。
2.  **ビルド (Build)**:
    出荷時に `npm run build` コマンドを実行すると、ビルドツール（Vite）が全てのファイルを読み込みます。
3.  **バンドル (Bundle)**:
    開発者が書いたコードと、Reactなどのライブラリ（`node_modules`）をすべて結合・圧縮し、少数のファイル（例: `index-xxxx.js`, `index-xxxx.css`）にまとめます。
4.  **実行**:
    ブラウザはこの「バンドルされたファイル」だけを読み込み、アプリケーションを実行します。React本体もこのファイルの中に含まれて動作します。
